# schema.graphql

# User types
type User {
  id: ID!
  googleId: String!
  displayName: String!
  email: String!
  avatar: String!
  ratedPlaces: [Place!]
}

# Place types

type Place {
  id: ID!
  type: String!
  geometry: Geometry!
  properties: PlaceProperties!
  averageRating: Float
  ratingCount: Int!
  favoriteCount: Int!
  userRating: Float 
  isFavorite: Boolean!
}

type Geometry {
  type: String!
  coordinates: [Float!]!
}

type PlaceProperties {
  name: String!
  description: String!
  address: String!
  image: String!
  instagram: String!
}

# Queries
type Query {
  currentUser: User
  places: [Place!]!
}

# Mutations
type Mutation {
  loginWithGoogle(code: String!): AuthPayload
  logout: LogoutResponse
  ratePlace(placeId: ID!, rating: Int!): Place
  addReview(placeId: ID!, text: String!): ReviewResult
  toggleFavorite(placeId: ID!): FavoriteActionResult!
}

type ReviewResult {
  id: ID!
  userId: ID!
  placeId: ID!
  rating: Float
  review: String
  isFavorite: Boolean!
  date: String!
}

type FavoriteActionResult {
  success: Boolean!
  message: String
  requiresAuth: Boolean!
  place: Place
}

type AuthPayload {
  user: User!
}

type LogoutResponse {
  message: String!
}

type RatePlaceResponse {
  success: Boolean!
}